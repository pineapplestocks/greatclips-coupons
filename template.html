<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-90ZQ7M4EFR"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-90ZQ7M4EFR');
    </script>
    
    <!-- Primary SEO Meta Tags -->
    <title>Great Clips Coupons 2026 - $5 Off Haircut Deals & Discounts</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
    <meta name="theme-color" content="#667eea">
    
    <!-- PWA / App Support -->
    <link rel="manifest" href="/manifest.json">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="GC Coupons">
    <link rel="apple-touch-startup-image" href="/icon-512.png">
    
    <meta name="description" content="Find working Great Clips coupons for January 2026. Save $3-$10 on haircuts with our daily updated coupon codes. Valid at 4,400+ US salon locations.">
    <meta name="keywords" content="Great Clips coupons, Great Clips coupon, haircut coupons, Great Clips discount, Great Clips promo code, cheap haircuts, $5 haircut, Great Clips deals, Great Clips coupon code 2026">
    <meta name="author" content="Great Clips Coupon Finder">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://greatclipsdeal.com/">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://greatclipsdeal.com/">
    <meta property="og:title" content="Great Clips Coupons 2026 - $5 Off Haircut Deals">
    <meta property="og:description" content="Find working Great Clips coupons. Save $3-$10 on haircuts with daily updated coupon codes. Valid at all US locations.">
    <meta property="og:image" content="https://5cfac31ce2fbf02462a3-5c2a4595f00d000c62f38115ac0c4e4e.ssl.cf1.rackcdn.com/uploads_production/promotion_images/file/15833/50707-002-1200x600-US-Sparkfly-1off-10off5.jpg">
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://greatclipsdeal.com/">
    <meta name="twitter:title" content="Great Clips Coupons 2026 - $5 Off Haircut Deals">
    <meta name="twitter:description" content="Find working Great Clips coupons. Save $3-$10 on haircuts with daily updated coupon codes.">
    <meta name="twitter:image" content="https://5cfac31ce2fbf02462a3-5c2a4595f00d000c62f38115ac0c4e4e.ssl.cf1.rackcdn.com/uploads_production/promotion_images/file/15833/50707-002-1200x600-US-Sparkfly-1off-10off5.jpg">
    
    <!-- Structured Data - Website -->
    <!-- Structured Data - Organization -->
    <!-- Structured Data - Aggregate Offer (Shows price range in search) -->
    <!-- Structured Data - FAQ (Shows expandable Q&A in search results) -->
    <!-- Structured Data - HowTo (Shows steps in search results) -->
    <!-- Structured Data - Breadcrumb -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                        },
                        accent: {
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                        }
                    }
                }
            }
        }
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; }
        html { scroll-behavior: smooth; }
        .glass {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .gradient-text {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-4px);
        }
        .universal-glow {
            box-shadow: 0 0 40px rgba(139, 92, 246, 0.3);
        }
        .not-junk-glow {
            text-shadow: 0 0 20px rgba(250, 204, 21, 0.5);
            animation: pulse-glow 2s ease-in-out infinite;
        }
        @keyframes pulse-glow {
            0%, 100% { text-shadow: 0 0 20px rgba(250, 204, 21, 0.5); }
            50% { text-shadow: 0 0 30px rgba(250, 204, 21, 0.8); }
        }
        .scissors-animation {
            display: inline-block;
            animation: snip 1.5s ease-in-out infinite;
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }
        @keyframes snip {
            0%, 100% { transform: rotate(0deg) scale(1); }
            25% { transform: rotate(-15deg) scale(1.1); }
            50% { transform: rotate(10deg) scale(1); }
            75% { transform: rotate(-5deg) scale(1.05); }
        }
        .updated-badge-glow {
            animation: badge-glow 2s ease-in-out infinite;
            border: 1px solid rgba(52, 211, 153, 0.3);
        }
        @keyframes badge-glow {
            0%, 100% { box-shadow: 0 0 15px rgba(52, 211, 153, 0.3); }
            50% { box-shadow: 0 0 25px rgba(52, 211, 153, 0.5); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, 20px); }
            to { opacity: 1; transform: translate(-50%, 0); }
        }
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
    </style>

    <!-- Schema: WebSite with Search -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Great Clips Coupons - GreatClipsDeal.com",
        "url": "https://greatclipsdeal.com/",
        "description": "Daily updated Great Clips coupons and haircut deals. Find $5.99-$8.99 coupons for all US locations.",
        "potentialAction": {
            "@type": "SearchAction",
            "target": {
                "@type": "EntryPoint",
                "urlTemplate": "https://greatclipsdeal.com/?search={search_term_string}"
            },
            "query-input": "required name=search_term_string"
        }
    }
    </script>
    
    <!-- Schema: Organization -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "GreatClipsDeal",
        "url": "https://greatclipsdeal.com",
        "logo": "https://raw.githubusercontent.com/pineapplestocks/greatclips-coupons/main/docs/logo.png",
        "description": "Find daily updated Great Clips coupons and save on haircuts",
        "foundingDate": "2024",
        "sameAs": [
            "https://twitter.com/greatclipsdeal",
            "https://www.reddit.com/r/GreatClipsCoupons2026/"
        ],
        "contactPoint": {
            "@type": "ContactPoint",
            "contactType": "customer service",
            "url": "https://greatclipsdeal.com/"
        }
    }
    </script>
    
    <!-- Schema: Product with AggregateOffer (Shows price range) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Product",
        "name": "Great Clips Haircut Coupon",
        "description": "Discounted haircut coupons for Great Clips salons. Updated daily with $5.99-$8.99 deals valid at 4,400+ US locations.",
        "image": "https://raw.githubusercontent.com/pineapplestocks/greatclips-coupons/main/docs/logo.png",
        "brand": {
            "@type": "Brand",
            "name": "Great Clips"
        },
        "offers": {
            "@type": "AggregateOffer",
            "lowPrice": "5.99",
            "highPrice": "8.99",
            "priceCurrency": "USD",
            "offerCount": "50",
            "availability": "https://schema.org/InStock",
            "validFrom": "2026-01-05",
            "priceValidUntil": "2026-12-31",
            "url": "https://greatclipsdeal.com/"
        },
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "2847",
            "bestRating": "5",
            "worstRating": "1"
        }
    }
    </script>
    
    <!-- Schema: FAQPage (Shows expandable Q&A in search) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "How do I get a Great Clips coupon?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Visit greatclipsdeal.com to find daily updated Great Clips coupons. Click any coupon to reveal the offer, then show it at checkout on your phone or print it. Coupons are pulled from official Great Clips Facebook ads."
                }
            },
            {
                "@type": "Question",
                "name": "Are Great Clips $5.99 coupons real?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Yes! Great Clips regularly offers $5.99 haircut coupons through their official Facebook ads. GreatClipsDeal.com collects these coupons daily. They are valid at most of the 4,400+ US Great Clips locations."
                }
            },
            {
                "@type": "Question",
                "name": "How much is a Great Clips haircut without a coupon?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Without a coupon, Great Clips haircuts cost $15-19 for adults, $13-17 for seniors (65+), and $13-16 for children. Prices vary by location. With a coupon from greatclipsdeal.com, you can pay as little as $5.99."
                }
            },
            {
                "@type": "Question",
                "name": "Do Great Clips coupons work at all locations?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Most Great Clips coupons are universal and work at any of the 4,400+ US locations. Some coupons are location-specific. Check the coupon details on greatclipsdeal.com before visiting."
                }
            },
            {
                "@type": "Question",
                "name": "How long are Great Clips coupons valid?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Great Clips coupons typically expire 14 days after clicking the coupon link. GreatClipsDeal.com updates daily with fresh coupons so you always have working deals available."
                }
            },
            {
                "@type": "Question",
                "name": "Can I use multiple Great Clips coupons?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Generally, only one coupon can be used per haircut. However, some locations may allow stacking with senior or military discounts. Ask your stylist before checkout."
                }
            }
        ]
    }
    </script>
    
    <!-- Schema: HowTo (Shows steps in search results) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to Use a Great Clips Coupon",
        "description": "Step-by-step guide to finding and redeeming Great Clips haircut coupons to save up to $10 on your next haircut.",
        "image": "https://greatclipsdeal.com/icon-512.png",
        "totalTime": "PT5M",
        "estimatedCost": {
            "@type": "MonetaryAmount",
            "currency": "USD",
            "value": "5.99"
        },
        "supply": [
            {
                "@type": "HowToSupply",
                "name": "Smartphone or printed coupon"
            }
        ],
        "step": [
            {
                "@type": "HowToStep",
                "name": "Find a coupon",
                "text": "Go to greatclipsdeal.com and browse available coupons. Filter by your state or price to find the best deal.",
                "url": "https://greatclipsdeal.com/",
                "position": 1
            },
            {
                "@type": "HowToStep",
                "name": "Click to reveal",
                "text": "Click the Get Coupon button to open the official Great Clips offer page. This starts the 14-day validity period.",
                "position": 2
            },
            {
                "@type": "HowToStep",
                "name": "Save the coupon",
                "text": "Screenshot the coupon or keep the page open on your phone. You can also print it if preferred.",
                "position": 3
            },
            {
                "@type": "HowToStep",
                "name": "Visit Great Clips",
                "text": "Go to your nearest Great Clips salon. Use the Great Clips app to check in online and reduce wait time.",
                "position": 4
            },
            {
                "@type": "HowToStep",
                "name": "Show at checkout",
                "text": "Before paying, show your coupon to the stylist. They will scan the barcode or enter the code to apply your discount.",
                "position": 5
            }
        ]
    }
    </script>
    
    <!-- Schema: BreadcrumbList -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://greatclipsdeal.com/"
            }
        ]
    }
    </script>
    
    <!-- Schema: ItemList (Coupon listings) -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "ItemList",
        "name": "Great Clips Coupons - January 2026",
        "description": "Current Great Clips haircut coupons updated daily",
        "numberOfItems": 50,
        "itemListOrder": "https://schema.org/ItemListOrderDescending",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "$5.99 Great Clips Haircut Coupon",
                "url": "https://greatclipsdeal.com/5-99-coupon"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "$6.99 Great Clips Haircut Coupon",
                "url": "https://greatclipsdeal.com/6-99-coupon"
            },
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Great Clips Coupons by State",
                "url": "https://greatclipsdeal.com/states"
            }
        ]
    }
    </script>

</head>
<body class="bg-gradient-to-br from-slate-50 via-white to-slate-100 min-h-screen">
    <div id="app"></div>

    <script>
        // Coupon data will be injected here by generate_website.py
        const COUPON_DATA = [];
        const LAST_UPDATED = "{{LAST_UPDATED}}";

        // Format date like "December 31st, 2026"
        function formatDate(dateStr) {
            if (!dateStr || dateStr === 'Unknown') return 'Unknown';
            try {
                const date = new Date(dateStr);
                const months = ['January', 'February', 'March', 'April', 'May', 'June', 
                               'July', 'August', 'September', 'October', 'November', 'December'];
                const day = date.getDate();
                const month = months[date.getMonth()];
                const year = date.getFullYear();
                
                // Add ordinal suffix (1st, 2nd, 3rd, 4th, etc.)
                let suffix = 'th';
                if (day === 1 || day === 21 || day === 31) suffix = 'st';
                else if (day === 2 || day === 22) suffix = 'nd';
                else if (day === 3 || day === 23) suffix = 'rd';
                
                return `${month} ${day}${suffix}, ${year}`;
            } catch {
                return dateStr;
            }
        }
        
        const FORMATTED_DATE = formatDate(LAST_UPDATED);
        
        // Get expiration date - if none, return 14 days from today
        function getExpiration(coupon) {
            if (coupon.expiration && coupon.expiration !== 'N/A') {
                return coupon.expiration;
            }
            // Calculate 14 days from today
            const futureDate = new Date();
            futureDate.setDate(futureDate.getDate() + 14);
            const month = (futureDate.getMonth() + 1).toString().padStart(2, '0');
            const day = futureDate.getDate().toString().padStart(2, '0');
            const year = futureDate.getFullYear();
            return `${month}/${day}/${year}`;
        }
        
        // Format city, state - removes trailing commas from city
        function formatCityState(coupon) {
            const city = (coupon.city || '').replace(/,+$/, '').trim();
            const state = (coupon.state || '').trim();
            if (city && state) {
                return `${city}, ${state}`;
            } else if (city) {
                return city;
            } else if (state) {
                return state;
            }
            return '';
        }
        
        // Share coupon function - shares link to this website
        function shareCoupon(couponUrl, price) {
            const shareText = `I found a ${price} Great Clips coupon! Get yours at greatclipsdeal.com`;
            const shareUrl = 'https://greatclipsdeal.com';
            
            // Try native share first (mobile)
            if (navigator.share) {
                navigator.share({
                    title: 'Great Clips Coupon',
                    text: shareText,
                    url: shareUrl
                }).catch(() => {
                    // Fallback to clipboard
                    copyShareLink(shareText, shareUrl);
                });
            } else {
                // Desktop fallback - copy to clipboard
                copyShareLink(shareText, shareUrl);
            }
        }
        
        function copyShareLink(text, url) {
            const fullText = `${text} ${url}`;
            navigator.clipboard.writeText(fullText).then(() => {
                // Show toast notification
                showToast('Link copied! Share it with friends üéâ');
            });
        }
        
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'fixed bottom-4 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-xl shadow-lg z-50 animate-fade-in';
            toast.textContent = message;
            document.body.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transition = 'opacity 0.3s';
                setTimeout(() => toast.remove(), 300);
            }, 2500);
        }
        
        // Mobile menu toggle
        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            if (menu) {
                menu.classList.toggle('hidden');
            }
        }

        // Check if coupon is universal (works at any US location)
        function isUniversal(coupon) {
            const loc = (coupon.location_name || '').trim();
            const state = (coupon.state || '').toUpperCase();
            const address = (coupon.address || '').trim();
            const city = (coupon.city || '').trim();
            
            if (state === 'US') return true;
            if (loc.toUpperCase().includes('ALL US') || loc.toUpperCase().includes('ALL LOCATIONS')) return true;
            if ((!loc || loc.toUpperCase() === 'GREAT CLIPS') && !address && !city) return true;
            
            return false;
        }

        // Get price as number
        function getPrice(coupon) {
            try {
                return parseFloat((coupon.price || '$999').replace('$', ''));
            } catch {
                return 999;
            }
        }

        // Price badge style
        function getPriceBadge(price) {
            if (price <= 5) return 'bg-emerald-500 text-white';
            if (price <= 8) return 'bg-teal-500 text-white';
            if (price <= 10) return 'bg-amber-500 text-white';
            return 'bg-orange-500 text-white';
        }

        // Debounce function - wait for user to stop typing
        let searchTimeout;
        function debounceSearch() {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                renderResults();
            }, 300);
        }
        
        // Store filter values globally so we don't lose them on re-render
        let currentFilters = {
            search: '',
            state: '',
            maxPrice: '',
            sortBy: 'price'
        };

        // Render just the results, not the whole page
        function renderResults() {
            currentFilters.search = document.getElementById('search')?.value || '';
            currentFilters.state = document.getElementById('stateFilter')?.value || '';
            currentFilters.maxPrice = document.getElementById('maxPrice')?.value || '';
            currentFilters.sortBy = document.getElementById('sortBy')?.value || 'price';
            
            const search = currentFilters.search.toLowerCase();
            const stateFilter = currentFilters.state;
            const maxPrice = currentFilters.maxPrice;
            const sortBy = currentFilters.sortBy;

            // Separate universal and regular coupons
            const universalCoupons = COUPON_DATA.filter(c => isUniversal(c));
            const regularCoupons = COUPON_DATA.filter(c => !isUniversal(c));

            // Filter regular coupons
            let filtered = regularCoupons.filter(c => {
                if (search) {
                    const searchable = [c.location_name, c.city, c.address, c.state].join(' ').toLowerCase();
                    if (!searchable.includes(search)) return false;
                }
                if (stateFilter && c.state !== stateFilter) return false;
                if (maxPrice && getPrice(c) > parseFloat(maxPrice)) return false;
                return true;
            });

            // Sort
            filtered.sort((a, b) => {
                if (sortBy === 'price') return getPrice(a) - getPrice(b);
                if (sortBy === 'expiration') return new Date(a.expiration) - new Date(b.expiration);
                if (sortBy === 'location') return (a.location_name || '').localeCompare(b.location_name || '');
                return 0;
            });

            // Update results count
            const resultsCount = document.getElementById('resultsCount');
            if (resultsCount) {
                resultsCount.innerHTML = `<span class="font-semibold text-slate-900">${filtered.length}</span> location-specific coupons${stateFilter ? ` in <span class="font-semibold text-purple-600">${stateFilter}</span>` : ''}`;
            }

            // Update grid - organized by state
            const resultsGrid = document.getElementById('resultsGrid');
            if (resultsGrid) {
                if (filtered.length > 0) {
                    // Group coupons by state
                    const byState = {};
                    filtered.forEach(c => {
                        const state = c.state || 'Other';
                        if (!byState[state]) byState[state] = [];
                        byState[state].push(c);
                    });
                    
                    // Sort states alphabetically
                    const sortedStates = Object.keys(byState).sort((a, b) => {
                        if (a === 'Other') return 1;
                        if (b === 'Other') return -1;
                        return a.localeCompare(b);
                    });
                    
                    // Generate HTML for each state section
                    resultsGrid.innerHTML = sortedStates.map(state => `
                        <div class="mb-10" id="state-${state}">
                            <div class="flex items-center gap-3 mb-4">
                                <h2 class="text-2xl font-bold text-slate-900">${state}</h2>
                                <span class="bg-purple-100 text-purple-700 text-sm font-medium px-3 py-1 rounded-full">${byState[state].length} coupon${byState[state].length > 1 ? 's' : ''}</span>
                            </div>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
                                ${byState[state].map(c => {
                                    const price = getPrice(c);
                                    return `
                                    <div class="bg-white rounded-2xl shadow-md shadow-slate-200/50 overflow-hidden card-hover border border-slate-100">
                                        <div class="p-5">
                                            <div class="flex items-start justify-between mb-4">
                                                <span class="inline-flex items-center px-3 py-1.5 rounded-lg text-xl font-bold ${getPriceBadge(price)} shadow-sm">
                                                    ${c.price || 'N/A'}
                                                </span>
                                                <span class="text-slate-400 text-sm">
                                                    ${getExpiration(c)}
                                                </span>
                                            </div>
                                            <h3 class="font-semibold text-slate-900 text-lg mb-1 line-clamp-2">${c.location_name || 'Great Clips'}</h3>
                                            <div class="text-slate-500 text-sm mb-4">
                                                <p class="truncate">${c.address || ''}</p>
                                                <p class="font-medium text-slate-600">${formatCityState(c)}</p>
                                            </div>
                                            <div class="flex gap-2">
                                                <button onclick="getCoupon('${c.url}')"
                                                    class="flex-1 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700 text-white font-semibold py-2.5 px-4 rounded-xl text-center transition-all shadow-md shadow-purple-200 cursor-pointer">
                                                    Get Coupon
                                                </button>
                                                <button onclick="navigator.clipboard.writeText('${c.url}'); this.textContent='‚úì'; setTimeout(() => this.textContent='üìã', 2000)"
                                                    class="bg-slate-100 hover:bg-slate-200 text-slate-600 p-2.5 rounded-xl transition-colors"
                                                    title="Copy link">üìã</button>
                                            </div>
                                        </div>
                                    </div>
                                    `;
                                }).join('')}
                            </div>
                        </div>
                    `).join('');
                } else {
                    resultsGrid.innerHTML = `
                    <div class="col-span-full text-center py-16 bg-white rounded-2xl shadow-sm">
                        <div class="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4">
                            <svg class="w-8 h-8 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <p class="text-xl text-slate-600 font-medium mb-2">No coupons found</p>
                        <p class="text-slate-400 mb-4">Try adjusting your filters</p>
                        <button onclick="document.getElementById('search').value=''; document.getElementById('stateFilter').value=''; document.getElementById('maxPrice').value=''; renderResults()"
                            class="text-purple-600 hover:text-purple-700 font-semibold">
                            Clear all filters ‚Üí
                        </button>
                    </div>
                    `;
                }
            }
        }

        // Render the app
        function render() {
            const app = document.getElementById('app');

            // Separate universal and regular coupons
            const universalCoupons = COUPON_DATA.filter(c => isUniversal(c));
            const regularCoupons = COUPON_DATA.filter(c => !isUniversal(c));
            
            // Initial sort by price
            regularCoupons.sort((a, b) => getPrice(a) - getPrice(b));

            // Get unique states
            const states = [...new Set(regularCoupons.map(c => c.state).filter(Boolean))].sort();
            
            // Initial filtered list
            const filtered = regularCoupons;

            app.innerHTML = `
                <!-- Navigation -->
                <nav class="bg-white/95 backdrop-blur-sm shadow-sm sticky top-0 z-50 border-b border-slate-100">
                    <div class="max-w-7xl mx-auto px-4">
                        <div class="flex justify-between items-center h-14">
                            <a href="/" class="flex items-center gap-2">
                                <img src="https://raw.githubusercontent.com/pineapplestocks/greatclips-coupons/main/docs/logo.png" alt="GreatClipsDeal" class="h-8 w-8 rounded-full object-cover">
                                <span class="font-bold text-lg text-purple-600 hidden sm:inline">GreatClipsDeal</span>
                            </a>
                            <div class="hidden md:flex items-center gap-6 text-sm">
                                <a href="/states" class="text-slate-600 hover:text-purple-600 font-medium transition-colors">Browse by State</a>
                                <a href="/calculator" class="text-slate-600 hover:text-purple-600 font-medium transition-colors">Savings Calculator</a>
                                <a href="/how-to-use" class="text-slate-600 hover:text-purple-600 font-medium transition-colors">How to Use</a>
                                <a href="/blog" class="text-slate-600 hover:text-purple-600 font-medium transition-colors">Blog</a>
                                <a href="/faq" class="text-slate-600 hover:text-purple-600 font-medium transition-colors">FAQ</a>
                            </div>
                            <button id="mobileMenuBtn" onclick="toggleMobileMenu()" class="md:hidden text-slate-600 p-2">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                                </svg>
                            </button>
                        </div>
                        <!-- Mobile Menu -->
                        <div id="mobileMenu" class="hidden md:hidden pb-4 border-t border-slate-100 pt-3">
                            <div class="flex flex-col gap-3">
                                <a href="/states" class="text-slate-600 hover:text-purple-600 font-medium py-1">Browse by State</a>
                                <a href="/calculator" class="text-slate-600 hover:text-purple-600 font-medium py-1">Savings Calculator</a>
                                <a href="/how-to-use" class="text-slate-600 hover:text-purple-600 font-medium py-1">How to Use</a>
                                <a href="/blog" class="text-slate-600 hover:text-purple-600 font-medium py-1">Blog</a>
                                <a href="/faq" class="text-slate-600 hover:text-purple-600 font-medium py-1">FAQ</a>
                                <a href="/about" class="text-slate-600 hover:text-purple-600 font-medium py-1">About</a>
                                <a href="/contact" class="text-slate-600 hover:text-purple-600 font-medium py-1">Contact</a>
                            </div>
                        </div>
                    </div>
                </nav>

                <!-- Header -->
                <header class="relative overflow-hidden">
                    <div class="absolute inset-0 gradient-bg opacity-95"></div>
                    <div class="absolute inset-0 bg-[url('data:image/svg+xml,%3Csvg width=\"30\" height=\"30\" viewBox=\"0 0 30 30\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cpath d=\"M15 0C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15 8.284 0 15-6.716 15-15C30 6.716 23.284 0 15 0zm0 27C8.373 27 3 21.627 3 15S8.373 3 15 3s12 5.373 12 12-5.373 12-12 12z\" fill=\"%23fff\" fill-opacity=\".05\"/%3E%3C/svg%3E')] opacity-30"></div>
                    <div class="relative max-w-7xl mx-auto px-4 py-12 md:py-16">
                        <div class="text-center">
                            <div class="inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-4 py-1.5 mb-4 updated-badge-glow">
                                <span class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse shadow-lg shadow-emerald-400/50"></span>
                                <span class="text-white text-sm font-medium">Updated ${FORMATTED_DATE}</span>
                            </div>
                            <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-3 tracking-tight">
                                <span class="inline-block scissors-animation">‚úÇÔ∏è</span> Great Clips Coupons
                            </h1>
                            <p class="text-white/80 text-lg md:text-xl max-w-2xl mx-auto">
                                Find your Great Clips coupon below, <span class="relative inline-block font-bold text-white underline decoration-yellow-400 decoration-4 underline-offset-4 not-junk-glow">Not Junk<span class="absolute -top-1 -right-6 text-xs bg-yellow-400 text-yellow-900 px-1.5 py-0.5 rounded-full font-bold transform rotate-12">‚úì</span></span>
                            </p>
                        </div>
                    </div>
                </header>

                <!-- Universal Coupons Featured Section -->
                ${universalCoupons.length > 0 ? `
                <section class="max-w-7xl mx-auto px-4 -mt-8 relative z-10 mb-8">
                    <div class="bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 rounded-2xl p-1 universal-glow">
                        <div class="bg-gradient-to-r from-violet-600 via-purple-600 to-indigo-600 rounded-xl p-6 md:p-8 relative overflow-hidden">
                            <div class="absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2 blur-3xl"></div>
                            <div class="absolute bottom-0 left-0 w-48 h-48 bg-white/10 rounded-full translate-y-1/2 -translate-x-1/2 blur-3xl"></div>
                            
                            <div class="relative">
                                <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6">
                                    <div>
                                        <div class="inline-flex items-center gap-2 bg-white/20 rounded-full px-3 py-1 mb-2">
                                            <svg class="w-4 h-4 text-yellow-300" fill="currentColor" viewBox="0 0 20 20">
                                                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                            </svg>
                                            <span class="text-white text-sm font-semibold">BEST VALUE</span>
                                        </div>
                                        <h2 class="text-2xl md:text-3xl font-bold text-white">Overall Best Coupon For Now</h2>
                                        <p class="text-white/70 mt-1">If you cannot find your individual location - Valid 14 days after redeeming</p>
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-${Math.min(universalCoupons.length, 4)} gap-4">
                                    ${universalCoupons.map(c => {
                                        const price = getPrice(c);
                                        const hasImage = c.image_url && c.image_url.length > 0;
                                        return `
                                        <div class="bg-white/15 backdrop-blur-sm rounded-xl overflow-hidden hover:bg-white/25 transition-all duration-300 border border-white/20">
                                            ${hasImage ? `
                                            <div class="w-full h-40 overflow-hidden">
                                                <img src="${c.image_url}" alt="Great Clips Coupon ${c.price || ''}" class="w-full h-full object-cover">
                                            </div>
                                            ` : ''}
                                            <div class="p-5">
                                                <div class="flex items-start justify-between mb-4">
                                                    <div class="bg-white rounded-lg px-4 py-2 shadow-lg">
                                                        <span class="text-3xl font-extrabold gradient-text">${c.price || 'N/A'}</span>
                                                    </div>
                                                    <span class="text-white/60 text-sm bg-white/10 px-2 py-1 rounded">
                                                        Exp: ${getExpiration(c)}
                                                    </span>
                                                </div>
                                                <h3 class="text-white font-semibold text-lg mb-1">Any Great Clips</h3>
                                                <p class="text-white/60 text-sm mb-4">Valid at all participating US salons</p>
                                                <div class="space-y-2">
                                                    <a href="${c.url}" target="_blank" 
                                                        class="block w-full bg-white text-purple-600 font-semibold py-3 px-4 rounded-lg text-center hover:bg-purple-50 transition-colors">
                                                        Get your coupon now ‚Üí
                                                    </a>
                                                    <button onclick="shareCoupon('${c.url}', '${c.price || ''}')"
                                                        class="w-full bg-white/20 hover:bg-white/30 text-white font-medium py-2.5 px-4 rounded-lg text-center transition-colors flex items-center justify-center gap-2">
                                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"/>
                                                        </svg>
                                                        Share this coupon
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                ` : ''}

                <!-- Filters -->
                <section class="max-w-7xl mx-auto px-4 py-6">
                    <div class="glass rounded-2xl p-6 shadow-lg shadow-slate-200/50 border border-white/50">
                        <div class="flex items-center gap-2 mb-4">
                            <svg class="w-5 h-5 text-slate-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"/>
                            </svg>
                            <span class="font-semibold text-slate-700">Filter Location Coupons</span>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div class="relative">
                                <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                                <input type="text" id="search" placeholder="Search city or location..."
                                    oninput="debounceSearch()"
                                    class="w-full pl-10 pr-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all outline-none">
                            </div>
                            <select id="stateFilter" onchange="renderResults()"
                                class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all outline-none appearance-none cursor-pointer">
                                <option value="">All States</option>
                                ${states.map(s => `<option value="${s}">${s}</option>`).join('')}
                            </select>
                            <select id="maxPrice" onchange="renderResults()"
                                class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all outline-none appearance-none cursor-pointer">
                                <option value="">Any Price</option>
                                <option value="5">Under $5</option>
                                <option value="8">Under $8</option>
                                <option value="10">Under $10</option>
                                <option value="12">Under $12</option>
                            </select>
                            <select id="sortBy" onchange="renderResults()"
                                class="w-full px-4 py-3 bg-white border border-slate-200 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all outline-none appearance-none cursor-pointer">
                                <option value="price">Price: Low to High</option>
                                <option value="expiration">Expiration Date</option>
                                <option value="location">Location Name</option>
                            </select>
                        </div>
                    </div>
                </section>

                <!-- Quick State Navigation -->
                <section class="max-w-7xl mx-auto px-4 mb-6">
                    <div class="bg-white rounded-xl shadow-sm border border-slate-100 p-4">
                        <p class="text-sm text-slate-500 mb-3 font-medium">Jump to state:</p>
                        <div class="flex flex-wrap gap-2" id="stateNav">
                            ${(() => {
                                const statesInData = [...new Set(regularCoupons.map(c => c.state).filter(Boolean))].sort();
                                return statesInData.map(state => `
                                    <a href="#state-${state}" class="px-3 py-1.5 text-sm bg-slate-100 hover:bg-purple-100 text-slate-700 hover:text-purple-700 rounded-lg transition-colors font-medium">
                                        ${state}
                                    </a>
                                `).join('');
                            })()}
                        </div>
                    </div>
                </section>

                <!-- Results -->
                <section class="max-w-7xl mx-auto px-4 pb-12">
                    <div class="flex items-center justify-between mb-6">
                        <p id="resultsCount" class="text-slate-600">
                            <span class="font-semibold text-slate-900">${filtered.length}</span> location-specific coupons
                        </p>
                    </div>

                    <!-- Coupons organized by state -->
                    <div id="resultsGrid">
                        ${(() => {
                            // Group coupons by state
                            const byState = {};
                            filtered.forEach(c => {
                                const state = c.state || 'Other';
                                if (!byState[state]) byState[state] = [];
                                byState[state].push(c);
                            });
                            
                            // Sort states alphabetically
                            const sortedStates = Object.keys(byState).sort((a, b) => {
                                if (a === 'Other') return 1;
                                if (b === 'Other') return -1;
                                return a.localeCompare(b);
                            });
                            
                            // Generate HTML for each state section
                            return sortedStates.map(state => `
                                <div class="mb-10" id="state-${state}">
                                    <div class="flex items-center gap-3 mb-4">
                                        <h2 class="text-2xl font-bold text-slate-900">${state}</h2>
                                        <span class="bg-purple-100 text-purple-700 text-sm font-medium px-3 py-1 rounded-full">${byState[state].length} coupon${byState[state].length > 1 ? 's' : ''}</span>
                                    </div>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5">
                                        ${byState[state].map(c => {
                                            const price = getPrice(c);
                                            return `
                                            <div class="bg-white rounded-2xl shadow-md shadow-slate-200/50 overflow-hidden card-hover border border-slate-100">
                                                <div class="p-5">
                                                    <div class="flex items-start justify-between mb-4">
                                                        <span class="inline-flex items-center px-3 py-1.5 rounded-lg text-xl font-bold ${getPriceBadge(price)} shadow-sm">
                                                            ${c.price || 'N/A'}
                                                        </span>
                                                        <span class="text-slate-400 text-sm">
                                                            ${getExpiration(c)}
                                                        </span>
                                                    </div>
                                                    <h3 class="font-semibold text-slate-900 text-lg mb-1 line-clamp-2">${c.location_name || 'Great Clips'}</h3>
                                                    <div class="text-slate-500 text-sm mb-4">
                                                        <p class="truncate">${c.address || ''}</p>
                                                        <p class="font-medium text-slate-600">${formatCityState(c)}</p>
                                                    </div>
                                                    <div class="flex gap-2">
                                                        <button onclick="getCoupon('${c.url}')"
                                                            class="flex-1 bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700 text-white font-semibold py-2.5 px-4 rounded-xl text-center transition-all shadow-md shadow-purple-200 cursor-pointer">
                                                            Get Coupon
                                                        </button>
                                                        <button onclick="navigator.clipboard.writeText('${c.url}'); this.textContent='‚úì'; setTimeout(() => this.textContent='üìã', 2000)"
                                                            class="bg-slate-100 hover:bg-slate-200 text-slate-600 p-2.5 rounded-xl transition-colors"
                                                            title="Copy link">üìã</button>
                                                    </div>
                                                </div>
                                            </div>
                                            `;
                                        }).join('')}
                                    </div>
                                </div>
                            `).join('');
                        })()}
                    </div>
                </section>

                <!-- Footer -->
                <footer class="bg-slate-900 text-slate-400 py-12">
                    <div class="max-w-7xl mx-auto px-4">
                        <!-- Footer Navigation Grid -->
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-10">
                            <div>
                                <h3 class="text-white font-bold mb-4">Popular Coupons</h3>
                                <ul class="space-y-2 text-sm">
                                    <li><a href="/5-99-coupon" class="hover:text-purple-400 transition-colors">$5.99 Coupons</a></li>
                                    <li><a href="/6-99-coupon" class="hover:text-purple-400 transition-colors">$6.99 Coupons</a></li>
                                    <li><a href="/printable-coupons" class="hover:text-purple-400 transition-colors">Printable Coupons</a></li>
                                    <li><a href="/senior-discount" class="hover:text-purple-400 transition-colors">Senior Discounts</a></li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-white font-bold mb-4">Browse by State</h3>
                                <ul class="space-y-2 text-sm">
                                    <li><a href="/california" class="hover:text-purple-400 transition-colors">California</a></li>
                                    <li><a href="/texas" class="hover:text-purple-400 transition-colors">Texas</a></li>
                                    <li><a href="/florida" class="hover:text-purple-400 transition-colors">Florida</a></li>
                                    <li><a href="/states" class="text-purple-400 hover:text-purple-300 font-medium transition-colors">All 50 States ‚Üí</a></li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-white font-bold mb-4">Resources</h3>
                                <ul class="space-y-2 text-sm">
                                    <li><a href="/how-to-use" class="hover:text-purple-400 transition-colors">How to Use Coupons</a></li>
                                    <li><a href="/prices" class="hover:text-purple-400 transition-colors">Great Clips Prices</a></li>
                                    <li><a href="/calculator" class="hover:text-purple-400 transition-colors">Savings Calculator</a></li>
                                    <li><a href="/faq" class="hover:text-purple-400 transition-colors">FAQ</a></li>
                                    <li><a href="/blog" class="hover:text-purple-400 transition-colors">Blog</a></li>
                                </ul>
                            </div>
                            <div>
                                <h3 class="text-white font-bold mb-4">Company</h3>
                                <ul class="space-y-2 text-sm">
                                    <li><a href="/about" class="hover:text-purple-400 transition-colors">About Us</a></li>
                                    <li><a href="/contact" class="hover:text-purple-400 transition-colors">Contact</a></li>
                                    <li><a href="/privacy" class="hover:text-purple-400 transition-colors">Privacy Policy</a></li>
                                    <li><a href="/terms" class="hover:text-purple-400 transition-colors">Terms of Service</a></li>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- SEO Content Section -->
                        <div class="mb-10 text-left max-w-4xl mx-auto border-t border-slate-800 pt-10">
                            <h2 class="text-xl font-bold text-white mb-4">About Great Clips Coupons</h2>
                            <p class="mb-4 text-slate-300">
                                Looking for <strong class="text-white">Great Clips coupons</strong>? You're in the right place! We update this page daily with the latest 
                                <strong class="text-white">Great Clips coupon codes</strong> and <strong class="text-white">haircut deals</strong> from their Facebook ads. 
                                Save $3 to $10 on your next haircut at any of the 4,400+ Great Clips salon locations across the United States and Canada.
                            </p>
                            <p class="mb-6 text-slate-300">
                                Our <strong class="text-white">Great Clips discount codes</strong> are sourced directly from official Great Clips promotions. 
                                Whether you need a <strong class="text-white">cheap haircut</strong>, a <strong class="text-white">$5.99 Great Clips coupon</strong>, 
                                or the best <strong class="text-white">Great Clips promo code for 2026</strong>, we've got you covered.
                            </p>
                            
                            <h3 class="text-lg font-semibold text-white mb-3">Frequently Asked Questions</h3>
                            <div class="space-y-4 text-sm">
                                <div>
                                    <h4 class="font-medium text-white">How do I use a Great Clips coupon?</h4>
                                    <p class="text-slate-400">Click "Get Coupon" to open the offer page. Show it to the stylist before your haircut, either on your phone or printed. <a href="/how-to-use" class="text-purple-400 hover:underline">See full guide</a>.</p>
                                </div>
                                <div>
                                    <h4 class="font-medium text-white">Are these Great Clips coupons legitimate?</h4>
                                    <p class="text-slate-400">Yes! All coupons are sourced from official Great Clips Facebook advertisements and link directly to offers.greatclips.com.</p>
                                </div>
                                <div>
                                    <h4 class="font-medium text-white">How often are coupons updated?</h4>
                                    <p class="text-slate-400">We automatically scan for new Great Clips coupons every day and update this page with the latest deals.</p>
                                </div>
                                <div>
                                    <h4 class="font-medium text-white">Can I use multiple Great Clips coupons?</h4>
                                    <p class="text-slate-400">No, Great Clips coupons are limited to one per customer per visit. Choose the best deal for your location.</p>
                                </div>
                            </div>
                            <p class="mt-4"><a href="/faq" class="text-purple-400 hover:text-purple-300 font-medium">View all FAQs ‚Üí</a></p>
                        </div>
                        
                        <div class="border-t border-slate-800 pt-6 text-center">
                            <p class="mb-2">Coupons sourced from public Facebook ads ‚Ä¢ Updated daily</p>
                            <p class="text-sm text-slate-500">¬© 2024-2026 GreatClipsDeal.com. Not affiliated with Great Clips Inc.</p>
                        </div>
                    </div>
                </footer>
            `;
        }

        // Initial render
        render();
        
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(reg => console.log('Service Worker registered'))
                .catch(err => console.log('Service Worker not registered', err));
        }
        
        // ============ EMAIL CAPTURE SYSTEM ============
        let pendingCouponUrl = '';
        
        function getCoupon(url) {
            // Check if already have email stored
            const savedEmail = localStorage.getItem('gc_email');
            if (savedEmail) {
                // Already subscribed, go directly to coupon
                window.open(url, '_blank');
                return;
            }
            
            // Show email modal
            pendingCouponUrl = url;
            document.getElementById('emailModal').classList.remove('hidden');
            document.getElementById('emailInput').focus();
        }
        
        function closeEmailModal() {
            document.getElementById('emailModal').classList.add('hidden');
            pendingCouponUrl = '';
        }
        
        function submitEmail(e) {
            e.preventDefault();
            const email = document.getElementById('emailInput').value;
            
            if (!email || !email.includes('@')) {
                alert('Please enter a valid email address');
                return;
            }
            
            // Save email locally so they don't have to enter again
            localStorage.setItem('gc_email', email);
            
            // Send to Formspree (free email collection service)
            // REPLACE with your Formspree endpoint!
            fetch('https://formspree.io/f/xrebvqjy', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ 
                    email: email,
                    source: 'coupon_gate',
                    coupon_url: pendingCouponUrl,
                    timestamp: new Date().toISOString()
                })
            }).catch(() => {}); // Silent fail - don't block user
            
            // Close modal and open coupon
            closeEmailModal();
            window.open(pendingCouponUrl, '_blank');
            
            // Show thank you toast
            showToast('Thanks! Enjoy your coupon üéâ');
        }
        
        function skipEmail() {
            // Let them skip but track it
            localStorage.setItem('gc_email_skipped', 'true');
            closeEmailModal();
            window.open(pendingCouponUrl, '_blank');
        }
        
        // Close modal on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeEmailModal();
        });
    </script>
    
    <!-- Email Capture Modal -->
    <div id="emailModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/60 backdrop-blur-sm" onclick="closeEmailModal()"></div>
        
        <!-- Modal Content -->
        <div class="relative bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 transform transition-all">
            <!-- Close button -->
            <button onclick="closeEmailModal()" class="absolute top-4 right-4 text-slate-400 hover:text-slate-600 text-2xl">&times;</button>
            
            <!-- Icon -->
            <div class="text-center mb-6">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-violet-500 to-purple-500 rounded-full mb-4">
                    <span class="text-3xl">‚úÇÔ∏è</span>
                </div>
                <h3 class="text-2xl font-bold text-slate-900">Get Your Coupon!</h3>
                <p class="text-slate-600 mt-2">Enter your email to unlock this deal and get future coupon alerts</p>
            </div>
            
            <!-- Form -->
            <form onsubmit="submitEmail(event)" class="space-y-4">
                <input 
                    type="email" 
                    id="emailInput"
                    placeholder="Enter your email"
                    class="w-full px-4 py-3 border-2 border-slate-200 rounded-xl focus:border-purple-500 focus:outline-none transition-colors"
                    required
                >
                <button 
                    type="submit"
                    class="w-full bg-gradient-to-r from-violet-600 to-purple-600 hover:from-violet-700 hover:to-purple-700 text-white font-bold py-3 px-6 rounded-xl transition-all shadow-lg shadow-purple-200"
                >
                    Unlock Coupon üîì
                </button>
            </form>
            
            <!-- Skip option -->
            <button 
                onclick="skipEmail()" 
                class="w-full mt-3 text-slate-500 hover:text-slate-700 text-sm py-2 transition-colors"
            >
                No thanks, just show me the coupon
            </button>
            
            <!-- Trust signals -->
            <p class="text-center text-xs text-slate-400 mt-4">
                üîí No spam, unsubscribe anytime. We respect your privacy.
            </p>
        </div>
    </div>
</body>
</html>
